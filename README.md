# SplitTypingPlugin

一个模拟人类打字习惯的消息分段发送插件。会根据标点符号和特殊格式自动分段，并模拟真实的打字速度发送消息。

> 此项目需要 Langbot v4 以上版本

## 功能特点

本项目在原版上进行了大量的算法改动，以适应多种细节
- 自动分段：根据标点符号(。！，等)和特殊格式(括号、数字)自动分段
- 打字机效果：模拟人类打字速度，按字符数计算发送延迟
- 智能分段：
  - 软分段：句中标点符号在一句话长度不足时不分段
  - 特殊符号：特殊处理英文模拟省略号，保留颜文字
  - 最大长度：超过配置的最大长度将不再分段发送
- 分段开关：支持群聊/私聊分别开启或关闭分段功能

## 开关、自定义

默认自动开启

- 命令 `!split_text on` `!split_text off`
- 自定义打字效果速度等配置见 Langbot 面板

## 注意事项

1. 群聊和私聊的分段状态是独立的
2. 同一对话中的消息会自动排队，等待前一条消息发送完成

### 分段效果

以下是文本分段的测试用例:
```
if __name__ == "__main__":
    split = SplitText()
    test_text = "你好！（兴奋地说）我今天遇到了一个非常有趣的情况，嘿嘿（^_^）你知道吗……？就是那个…（稍微停顿）我们之前讨论过的项目，突然有了意想不到的进展！这真的是……（微笑）太令人兴奋了！"
    print("\n".join(split.split(test_text)))

将被分段为:

1. 你好！
2. （兴奋地说）我今天遇到了一个非常有趣的情况
3. 嘿嘿（^_^）你知道吗……？
4. 就是那个…（稍微停顿）我们之前讨论过的项目
5. 突然有了意想不到的进展！
6. 这真的是……
7. （微笑）太令人兴奋了！
```


## 开源协议

MIT License

## 作者

Sansui233
