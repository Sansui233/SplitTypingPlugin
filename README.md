# SplitTypingPlugin

一个模拟人类打字习惯的消息分段发送插件。会根据标点符号和特殊格式自动分段，并模拟真实的打字速度发送消息。

## 安装方法

配置完成 [LangBot](https://github.com/RockChinQ/LangBot) 主程序后使用管理员账号向机器人发送命令即可安装：

```
!plugin get https://github.com/sanxianxiaohuntun/SplitTypingPlugin
```

![2893784b8fb06f64e71885043eeb947c](https://github.com/user-attachments/assets/83436b58-84fb-4468-8e5d-0c34bba961db)

## 功能特点

本项目在原版上进行了大量的算法改进，以适应多种细节
- 自动分段：根据标点符号(。！，等)和特殊格式(括号、数字)自动分段
- 打字机效果：模拟人类打字速度，按字符数计算发送延迟
- 智能分段：
  - 软分段：句中标点符号在一句话长度不足时不分段
  - 特殊符号：特殊处理英文模拟省略号，保留颜文字
  - 最大长度：超过配置的最大长度将不再分段发送
- 分段开关：支持群聊/私聊分别开启或关闭分段功能

## 使用说明

### 基础命令
- `开启分段` - 开启分段发送功能
- `关闭分段` - 关闭分段发送功能

### 配置文件

插件目录下的 `config.yaml`:

```yaml
# 打字机效果配置
typing_settings:
  # 每个字符的延迟时间（秒）
  char_delay: 0.1
  # 每段之间的额外停顿时间（秒）
  segment_pause: 0.5
  # 最大分段长度，超过此长度将不进行分段
  max_split_length: 50
```

## 注意事项

1. 分段功能默认加载插件时开启
2. 群聊和私聊的分段状态是独立的
5. 同一对话中的消息会自动排队，等待前一条消息发送完成

### 分段效果

以下是文本分段的测试用例:
```
if __name__ == "__main__":
    split = SplitText()
    test_text = "你好！（兴奋地说）我今天遇到了一个非常有趣的情况，嘿嘿（^_^）你知道吗……？就是那个…（稍微停顿）我们之前讨论过的项目，突然有了意想不到的进展！这真的是……（微笑）太令人兴奋了！"
    print("\n".join(split.split(test_text)))

将被分段为:

1. 你好！
2. （兴奋地说）我今天遇到了一个非常有趣的情况
3. 嘿嘿（^_^）你知道吗……？
4. 就是那个…（稍微停顿）我们之前讨论过的项目
5. 突然有了意想不到的进展！
6. 这真的是……
7. （微笑）太令人兴奋了！
```


## 开源协议

MIT License

## 作者

Sansui233
